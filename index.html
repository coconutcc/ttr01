<!DOCTYPE html>
<html>
  <head>
    <title>Embedding Vega-Lite</title>
    <script src="https://cdn.jsdelivr.net/npm/vega@5.21.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.2.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.20.2"></script>
  </head>
  <body>
    <div id="vis"></div>

    <script type="text/javascript">
      var yourVlSpec = {
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 1200,
  "height": 700,
  "layer": [
        {
          "data": {
            "url": "https://vega.github.io/editor/data/us-10m.json",
            "format": {
              "type": "topojson",
              "feature": "states"
            }
          },
          "mark": {
            "type": "geoshape",
            "fill": "lightgrey",
            "stroke": "white"
          }
        },
        {
          "data": {
            "name": "cities",
            "values": [
                {"city": "Atlanta",
                 "lat": 33.753746,
                 "long": -84.386330 
                },
                {"city": "Boston",
                 "lat": 42.361145,
                 "long": -71.057083
                },
                {"city": "Chicago",
                 "lat": 41.881832,
                 "long": -87.623177
                },
                {"city": "Dallas",
                "lat": 32.779167,
                "long": -96.808891 
                },
                {"city": "Denver",
                 "lat": 39.742043,
                 "long": -104.991531
                 },
                {"city": "Houston",
                 "lat": 29.749907,
                 "long": -95.358421
                 },
                {"city": "Las Vegas",
                 "lat": 36.114647,
                 "long": -115.172813
                 },
                {"city": "Los Angeles",
                 "lat": 34.052235,
                 "long": -118.243683
                 },
                {"city": "Miami",
                 "lat": 25.761681,
                 "long": -80.191788
                 },
                {"city": "New York",
                 "lat": 40.730610,
                 "long": -73.935242
                 },
                {"city": "Portland",
                 "lat": 45.523064,
                 "long": -122.676483
                },
                {"city": "Washington, D.C.",
                 "lat": 38.900497,
                 "long": -77.007507
                }, 
               {"city": "San Francisco",
                "lat": 37.773972,
                "long": -122.431297
                },
               {"city": "Seattle",
                "lat": 47.608013,
                "long": -122.335167
                }
              ]
          },
          "encoding": {
            "latitude": {
              "field": "lat",
              "type": "quantitative"
            },
            "longitude": {
              "field": "long",
              "type": "quantitative"
            }
          },
          "layer": [
            {
              "mark": {
                "type": "circle",
                "color": "black",
                "size": 50
              }
            },
            {
              "mark": {
                "type": "text",
                "dy": -10
              },
              "encoding": {
                "text": { "field": "city", "type": "nominal" }
              }
            }
          ]
        },
        {
          "data": {
            "name": "game_states",
            "values": [
              { "round": 1,
                "player": "p1",
                "action": "draw",
                "scity": null,
                "dcity": null,
                "points": 0,
                "card_color": null,
                "card_num": 0
              },
              { "round": 1,
                "player": "p2",
                "action": "draw",
                "scity": null,
                "dcity": null,
                "points": 0,
                "card_color": null,
                "card_num": 0
              },
              { "round": 1,
                "player": "p3",
                "action": "draw",
                "scity": null,
                "dcity": null,
                "points": 0,
                "card_color": null,
                "card_num": 0
              },
              { "round": 2,
                "player": "p1",
                "action": "connect",
                "scity": "Chicago",
                "dcity": "Atlanta",
                "points": 7,
                "card_color": "purple",
                "card_num": 6
              },
              { "round": 2,
                "player": "p2",
                "action": "connect",
                "scity": "Boston",
                "dcity": "New York",
                "points": 3,
                "card_color": "blue",
                "card_num": 2
              },
              { "round": 2,
                "player": "p3",
                "action": "connect",
                "scity": "San Francisco",
                "dcity": "Los Angeles",
                "points": 4,
                "card_color": "yellow",
                "card_num": 3
              },
              { "round": 3,
                "player": "p1",
                "action": "draw",
                "scity": null,
                "dcity": null,
                "points": 0,
                "card_color": null,
                "card_num": 0
              },
              { "round": 3,
                "player": "p2",
                "action": "draw",
                "scity": null,
                "dcity": null,
                "points": 0,
                "card_color": null,
                "card_num": 0
              },
              { "round": 3,
                "player": "p3",
                "action": "draw",
                "scity": null,
                "dcity": null,
                "points": 0,
                "card_color": null,
                "card_num": 0
              },
              { "round": 4,
                "player": "p1",
                "action": "connect",
                "scity": "Atlanta",
                "dcity": "Dallas",
                "points": 7,
                "card_color": "orange",
                "card_num": 6
              },
              { "round": 4,
                "player": "p2",
                "action": "connect",
                "scity": "New York",
                "dcity": "Washington, D.C.",
                "points": 3,
                "card_color": "red",
                "card_num": 2
              },
              { "round": 4,
                "player": "p3",
                "action": "connect",
                "scity": "Los Angeles",
                "dcity": "Las Vegas",
                "points": 3,
                "card_color": "blue",
                "card_num": 2
              },
              { "round": 5,
                "player": "p1",
                "action": "draw",
                "scity": null,
                "dcity": null,
                "points": 0,
                "card_color": null,
                "card_num": 0
              },
              { "round": 5,
                "player": "p2",
                "action": "draw",
                "scity": null,
                "dcity": null,
                "points": 0,
                "card_color": null,
                "card_num": 0
              },
              { "round": 5,
                "player": "p3",
                "action": "draw",
                "scity": null,
                "dcity": null,
                "points": 0,
                "card_color": null,
                "card_num": 0
              },
              { "round": 6,
                "player": "p1",
                "action": "connect",
                "scity": "Dallas",
                "dcity": "Houston",
                "points": 3,
                "card_color": "purple",
                "card_num": 2
              },
              { "round": 6,
                "player": "p2",
                "action": "connect",
                "scity": "Washington, D.C.",
                "dcity": "Miami",
                "points": 9,
                "card_color": "yellow",
                "card_num": 8
              },
              { "round": 6,
                "player": "p3",
                "action": "connect",
                "scity": "Seattle",
                "dcity": "Portland",
                "points": 3,
                "card_color": "orange",
                "card_num": 2
              }
            ]
          },
          "transform": [
            {
              "lookup": "scity",
              "from": {
                "data": { "name": "cities" },
                "key": "city",
                "fields": ["lat", "long"]
              },
              "as": ["slat", "slong"]
            },
            {
              "lookup": "dcity",
              "from": {
                "data": { "name": "cities" },
                "key": "city",
                "fields": ["lat", "long"]
              },
              "as": ["dlat", "dlong"]
            }
          ],

          "projection": { "type": "albersUsa" },
          "mark": "rule",
          "encoding": {
            "strokeWidth": {"field": "points"},
            "tooltip": {"field": "player"},
            "latitude": {
              "field": "slat",
              "type": "quantitative"
            },
            "longitude": {
              "field": "slong",
              "type": "quantitative"
            },
            "latitude2": {
              "field": "dlat",
              "type": "quantitative"
            },
            "longitude2": { 
              "field": "dlong",
              "type": "quantitative"
            }
        }
      }
    ]
  };
      vegaEmbed('#vis', yourVlSpec);
    </script>
  </body>
</html>
